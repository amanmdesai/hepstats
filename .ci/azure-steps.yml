steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '$(python.version)'
    architecture: 'x64'

- bash: |
    conda env create --quiet --force --file environment.yml
  displayName: Create Anaconda environment

- bash: |
    source activate scikit-stats-test
    pip install pytest pytest-azurepipelines pytest-cov pytest-runner
    python -m pytest ./tests --doctest-modules --cov=skstats --cov-report=html
  displayName: 'Test with pytest and collect coverage metrics'
